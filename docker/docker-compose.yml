version: '3'

networks:
  symfony-network:
    external: true

services:
  phpfpm:
    image: 'bitnami/php-fpm:latest'
    container_name: phpfpm
    networks:
      - symfony-network
    volumes:
      - "${PRJ_DIR}:/app"
  nginx:
    image: 'bitnami/nginx:latest'
    container_name: nginx
    depends_on:
      - phpfpm
    networks:
      symfony-network:
        ipv4_address: 172.25.0.3

    ports:
      - '80:8080'
      - '443:8443'
    volumes:
      - "${PRJ_DIR}/docker/nginx.conf:/bitnami/nginx/conf/vhosts/nginx.conf"
